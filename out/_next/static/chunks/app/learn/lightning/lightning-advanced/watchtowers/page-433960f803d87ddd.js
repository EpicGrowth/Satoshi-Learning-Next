(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9730],{1243:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5196:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},14186:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},24599:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(95155);t(12115);var n=t(7068),r=t(25165),i=t(78208),c=t(66695),l=t(75525),d=t(92657),o=t(14186),h=t(1243),m=t(25487),u=t(71539);let p="lightning-advanced",x="watchtowers";function g(){return(0,a.jsx)(n.F,{children:(0,a.jsx)(r.s,{moduleId:p,sectionId:x,children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(c.Zp,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Watchtowers: Guardians of the Lightning Network"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"prose dark:prose-invert max-w-none",children:[(0,a.jsx)("h3",{children:"What Are Lightning Watchtowers?"}),(0,a.jsx)("p",{children:"Lightning watchtowers are specialized services designed to monitor the Bitcoin blockchain for channel breaches and respond on behalf of offline Lightning nodes. They serve as a critical security backstop that prevents malicious channel closures when a node is unable to defend itself."}),(0,a.jsx)("p",{children:"In the Lightning Network's design, if a user goes offline, their channel partners could potentially attempt to close channels using outdated states that benefit them unfairly. Watchtowers prevent this type of theft by monitoring the blockchain and automatically broadcasting justice transactions when fraud is detected."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium mb-4 flex items-center",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-purple-600 mr-2"}),"Core Functionality"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,a.jsx)("p",{children:"Watchtowers continuously scan the blockchain for breached commitment transactions—those that attempt to settle a Lightning channel using an outdated state. When detected, they broadcast pre-signed justice transactions that penalize the cheating party."}),(0,a.jsx)("p",{children:"This system ensures that even users who are temporarily offline can enforce their channel rights, significantly enhancing the security of the Lightning Network."})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium mb-4 flex items-center",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-purple-600 mr-2"}),"Privacy Considerations"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,a.jsx)("p",{children:"Modern watchtowers are designed with privacy in mind, using blinded justice transactions that prevent the watchtower from learning which channels they're monitoring or the contents of transactions they might broadcast."}),(0,a.jsx)("p",{children:"Through cryptographic techniques, a watchtower can fulfill its monitoring duties without gaining access to sensitive user information."})]})]})]}),(0,a.jsx)("div",{className:"border-l-4 border-purple-500 pl-4 italic",children:'"Watchtowers represent a critical security innovation for the Lightning Network. They allow users to safely go offline without compromising their funds, transforming Lightning from a system that required constant vigilance to one that can be used casually by everyday users."'})]})]}),(0,a.jsxs)(c.Zp,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"The Problem: Channel Breach Risks"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"To understand watchtowers, we must first understand the Lightning Network's underlying security model and its inherent vulnerabilities:"}),(0,a.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 p-5 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Channel State Enforcement"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"ml-6 space-y-6",children:[(0,a.jsxs)("div",{className:"relative border-l-2 border-red-400 pl-4 pb-6",children:[(0,a.jsx)("h5",{className:"font-medium text-red-500",children:"The Vulnerability"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Lightning channels maintain a sequence of commitment transactions, each representing the current balance state between parties. When a new state is agreed upon, the previous state should be invalidated."}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"However, a malicious actor could attempt to broadcast an older commitment transaction that gives them a more favorable balance—effectively stealing funds if their counterparty is offline and unable to respond."})]}),(0,a.jsxs)("div",{className:"relative border-l-2 border-green-400 pl-4",children:[(0,a.jsx)("h5",{className:"font-medium text-green-500",children:"The Solution"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:'The Lightning protocol includes a penalty mechanism: if a party broadcasts an outdated state, their counterparty can use a "justice transaction" to claim all funds in the channel—not just their share.'}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"This creates a strong disincentive against cheating. But it only works if the cheated party is online and monitoring the blockchain, which is where watchtowers come in."})]})]})})]}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-1 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-1",children:"The Offline Dilemma"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Without watchtowers, Lightning Network users would need to be constantly online to protect their funds, scanning every block for potential channel breaches. This requirement would severely limit Lightning's utility for mobile users, occasional users, or during network outages."})]})]})})]})]}),(0,a.jsxs)(c.Zp,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Technical Implementation"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Watchtowers employ sophisticated cryptographic techniques to provide security without compromising privacy:"}),(0,a.jsxs)("div",{className:"relative py-8",children:[(0,a.jsx)("div",{className:"absolute left-4 h-full w-0.5 bg-gradient-to-b from-purple-600/30 via-purple-600 to-purple-600/30"}),(0,a.jsxs)("div",{className:"ml-10 space-y-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"1"})}),(0,a.jsx)("h4",{className:"font-medium",children:"State Updates & Tower Registration"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"When a Lightning channel state is updated, each party prepares justice transactions for all previous states. They encrypt each justice transaction using a unique key derived from the commitment transaction ID it's designed to punish."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"2"})}),(0,a.jsx)("h4",{className:"font-medium",children:"Data Sharing"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Clients send encrypted justice transaction data to their watchtower(s), along with a hint that helps identify breaches without revealing channel details. Importantly, the watchtower cannot decrypt this data until a breach occurs."}),(0,a.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 p-3 rounded-md mt-2 font-mono text-xs overflow-auto",children:(0,a.jsx)("code",{children:"// Client-side pseudocode\nfor each outdated_state in channel_states:\n  breachKey = txid_to_breach_key(outdated_state.txid)\n  encryptedJustice = encrypt(justice_transaction, breachKey)\n  hint = generate_hint(outdated_state.txid)\n  send_to_watchtower(hint, encryptedJustice)"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"3"})}),(0,a.jsx)("h4",{className:"font-medium",children:"Blockchain Monitoring"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"The watchtower continuously scans new Bitcoin blocks, checking each transaction against its database of hints. This is done efficiently using filtered block data (compact filters)."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"4"})}),(0,a.jsx)("h4",{className:"font-medium",children:"Breach Detection & Response"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"When a potential breach is detected, the watchtower attempts to derive the breach key from the on-chain transaction ID. If successful, it can decrypt the justice transaction and broadcast it to the network, penalizing the cheater."}),(0,a.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 p-3 rounded-md mt-2 font-mono text-xs overflow-auto",children:(0,a.jsx)("code",{children:"// Watchtower-side pseudocode\nfor each transaction in new_block:\n  if hint_matches(transaction.txid, stored_hints):\n    breachKey = txid_to_breach_key(transaction.txid)\n    justiceTransaction = decrypt(stored_encrypted_justice, breachKey)\n    if valid(justiceTransaction):\n      broadcast(justiceTransaction)\n      // Justice served"})})]})]})]})]})]}),(0,a.jsxs)(c.Zp,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Watchtower Deployment Models"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"border border-border p-5 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Self-Hosted Watchtowers"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"Users run their own watchtower software alongside their Lightning node, typically on a separate, always-online device."}),(0,a.jsxs)("div",{className:"space-y-1 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),(0,a.jsx)("span",{children:"Maximum security and trust"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),(0,a.jsx)("span",{children:"No additional fees"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-500 mr-2",children:"✗"}),(0,a.jsx)("span",{children:"Requires technical knowledge"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-500 mr-2",children:"✗"}),(0,a.jsx)("span",{children:"Needs always-on infrastructure"})]})]})]})]}),(0,a.jsxs)("div",{className:"border border-border p-5 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Trusted Third-Party Services"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"Commercial watchtower services run by trusted entities in the Lightning ecosystem, often operating multiple servers for redundancy."}),(0,a.jsxs)("div",{className:"space-y-1 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),(0,a.jsx)("span",{children:"Easy to use"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),(0,a.jsx)("span",{children:"Professional reliability"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-500 mr-2",children:"✗"}),(0,a.jsx)("span",{children:"Usually involves fees"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-500 mr-2",children:"✗"}),(0,a.jsx)("span",{children:"Requires some trust"})]})]})]})]}),(0,a.jsxs)("div",{className:"border border-border p-5 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-3",children:"Decentralized Watchtower Networks"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"Federated or decentralized networks where multiple watchtowers collaborate, often with incentive mechanisms for reliable service."}),(0,a.jsxs)("div",{className:"space-y-1 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),(0,a.jsx)("span",{children:"High redundancy"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-green-500 mr-2",children:"✓"}),(0,a.jsx)("span",{children:"Censorship resistance"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-500 mr-2",children:"✗"}),(0,a.jsx)("span",{children:"Complex implementation"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-red-500 mr-2",children:"✗"}),(0,a.jsx)("span",{children:"Economic model still evolving"})]})]})]})]})]}),(0,a.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-1 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-1",children:"Best Practice: Multiple Watchtowers"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"For maximum security, Lightning Network users should consider using multiple watchtowers simultaneously, ideally from different providers or models. This redundancy ensures that if one watchtower fails or is compromised, others can still protect the user's channels."})]})]})})]}),(0,a.jsxs)(c.Zp,{className:"p-6 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Future Developments in Watchtower Technology"}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Incentivization Models"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Future watchtowers may implement reward systems for successful justice transactions, allowing them to claim a small percentage of recovered funds as payment for their services. This could create a sustainable market for watchtower services."})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Enhanced Privacy Techniques"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ongoing research is improving the privacy properties of watchtowers, implementing techniques like blinded revocation paths and encrypted transaction templates that further reduce the information available to watchtowers."})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Storage Optimization"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"As channels live longer and state updates accumulate, storage requirements for watchtowers grow. New compression and pruning techniques are being developed to make watchtower services more efficient and scalable."})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Altruistic Community Watchtowers"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Community-run watchtower networks are emerging, where Lightning enthusiasts contribute resources to maintain the security of the overall network without direct compensation, similar to how some run Bitcoin nodes."})]})]})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(i.A,{moduleId:p,sectionId:x,verificationId:"watchtowers-basics",label:"I understand how watchtowers help secure the Lightning Network"})})]})})})}},35169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},43453:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},60455:(e,s,t)=>{Promise.resolve().then(t.bind(t,24599))},71539:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},78208:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(95155),n=t(12115),r=t(93156),i=t(35695),c=t(5196);let l=e=>{let{moduleId:s,verificationId:t,sectionId:l,label:d="I understand what Bitcoin is and its revolutionary properties"}=e,{updateSectionProgress:o,getSectionProgress:h,markSectionComplete:m}=(0,r.v)(),u=(0,i.usePathname)().includes("/lightning")?"lightning":"bitcoin",p=s.includes("-")?s:"".concat(u,"-").concat(s),x=l||t,[g,f]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{f(h(u,p,x)>=100)},[p,t,x,u]),(0,a.jsx)("div",{className:"mt-4 mb-8",children:(0,a.jsxs)("button",{onClick:()=>{let e=!g;f(e),e&&(o(u,p,x,t),m(u,p,x))},className:"flex items-center focus:outline-none",children:[(0,a.jsx)("div",{className:"\n          w-5 h-5 rounded-sm flex items-center justify-center mr-3\n          ".concat(g?"bg-emerald-500":"border border-muted-foreground","\n        "),children:g&&(0,a.jsx)(c.A,{className:"h-4 w-4 text-white"})}),(0,a.jsx)("span",{className:"text-sm",children:d})]})})}},92138:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},92657:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[1778,4055,9051,3156,6400,8441,1684,7358],()=>s(60455)),_N_E=e.O()}]);