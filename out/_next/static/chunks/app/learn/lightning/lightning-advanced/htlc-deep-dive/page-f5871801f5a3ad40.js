(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5366],{1243:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5196:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},23444:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(95155);t(12115);var r=t(7068),i=t(25165),l=t(78208),n=t(66695),c=t(32919),d=t(19946);let o=(0,d.A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var m=t(29621);let h=(0,d.A)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);var u=t(1243),p=t(73314);let x="lightning-advanced",g="htlc-deep-dive";function f(){return(0,a.jsx)(r.F,{children:(0,a.jsx)(i.s,{moduleId:x,sectionId:g,children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Hashed Time-Locked Contracts (HTLCs): Advanced Operations"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"prose dark:prose-invert max-w-none",children:[(0,a.jsx)("h3",{children:"Behind The Scenes: How HTLCs Enable Lightning"}),(0,a.jsx)("p",{children:"HTLCs are the cornerstone technology that makes the Lightning Network possible. They create conditional payment channels where funds are locked until specific cryptographic conditions are met, or a timeout occurs."}),(0,a.jsx)("p",{children:"At its core, an HTLC is a sophisticated combination of two distinct types of Bitcoin script conditions:"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium mb-4 flex items-center",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-purple-600 mr-2"}),"Hash Lock"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,a.jsx)("p",{children:"Funds are cryptographically locked with a hash of a secret (preimage). The recipient must reveal the correct preimage value that produces the hash to claim the payment."}),(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-md font-mono text-xs overflow-auto",children:(0,a.jsx)("pre",{children:"OP_HASH256 <hash> OP_EQUALVERIFY"})})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium mb-4 flex items-center",children:[(0,a.jsx)(o,{className:"h-5 w-5 text-purple-600 mr-2"}),"Time Lock"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,a.jsx)("p",{children:"The payment channel contract includes a timelock that allows the sender to reclaim their funds after a specified time period if the hash lock isn't satisfied."}),(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded-md font-mono text-xs overflow-auto",children:(0,a.jsx)("pre",{children:"OP_CHECKLOCKTIMEVERIFY <timeout> OP_DROP"})})]})]})]}),(0,a.jsx)("div",{className:"border-l-4 border-purple-500 pl-4 italic",children:'"HTLCs are the atomic primitives that enable multi-hop payments without requiring trust between intermediate nodes. This is a fundamental building block of the Lightning Network\'s scalability and routing capabilities."'})]})]}),(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"The HTLC Script in Detail"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Let's examine the actual Bitcoin script conditions that comprise a standard HTLC:"}),(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg font-mono text-sm overflow-auto",children:(0,a.jsx)("pre",{children:"IF\n  OP_HASH256 <hash_of_secret> OP_EQUALVERIFY\n  <recipient_pubkey> OP_CHECKSIG\nELSE\n  <timeout_blocks> OP_CHECKLOCKTIMEVERIFY OP_DROP\n  <sender_pubkey> OP_CHECKSIG\nENDIF"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Success Path"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"If the recipient knows the preimage of the hash, they can use the first execution path to claim the funds immediately by providing the secret and their signature."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Timeout Path"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"If the timeout period has elapsed and the hash lock hasn't been satisfied, the sender can reclaim their funds using the second execution path with just their signature."})]})]})]})]}),(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Multi-Hop HTLC Propagation"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"The true power of HTLCs becomes apparent in multi-hop Lightning payments. Here's how HTLCs chain together across multiple payment channels:"}),(0,a.jsxs)("div",{className:"relative py-8",children:[(0,a.jsx)("div",{className:"absolute left-4 h-full w-0.5 bg-gradient-to-b from-purple-600/30 via-purple-600 to-purple-600/30"}),(0,a.jsxs)("div",{className:"ml-10 space-y-8",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"1"})}),(0,a.jsx)("h4",{className:"font-medium",children:"Payment Initiation"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"The sender generates a random secret (preimage) and calculates its hash. The payment amount and hash are sent along the route to the recipient, but the secret is kept private."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"2"})}),(0,a.jsx)("h4",{className:"font-medium",children:"HTLC Chain Formation"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Each node along the route creates an HTLC with the next node, committing funds conditionally based on the same hash but with decreasing timelocks to ensure proper flow of the secret."}),(0,a.jsxs)("div",{className:"mt-3 flex items-center space-x-4 overflow-auto",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)("span",{className:"text-xs font-medium",children:"Node A"})}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:"Timeout: 60 blocks"})]}),(0,a.jsx)(h,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-shrink-0 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)("span",{className:"text-xs font-medium",children:"Node B"})}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:"Timeout: 50 blocks"})]}),(0,a.jsx)(h,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-shrink-0 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)("span",{className:"text-xs font-medium",children:"Node C"})}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:"Timeout: 40 blocks"})]}),(0,a.jsx)(h,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),(0,a.jsx)("div",{className:"flex-shrink-0 text-center",children:(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)("span",{className:"text-xs font-medium",children:"Recipient"})})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"3"})}),(0,a.jsx)("h4",{className:"font-medium",children:"Secret Revelation"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Once the recipient receives the HTLC, the sender reveals the preimage to them through a secure channel. The recipient uses this secret to claim the funds from the final node."})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute -left-10 top-0 h-8 w-8 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 font-medium",children:"4"})}),(0,a.jsx)("h4",{className:"font-medium",children:"Reverse Secret Propagation"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"The secret now propagates backward through the chain. Each node reveals the secret to claim funds from the previous node, creating a cascade of settled payments."})]})]})]})]})]}),(0,a.jsxs)(n.Zp,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-yellow-500 mr-2"}),"Advanced HTLC Considerations"]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Timelocks Management"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Correctly decreasing timelock values is critical. Each hop must have enough time to claim funds if the next hop reveals the secret, but also enough time for the previous hop to claim a refund if something fails."})]}),(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Fee Considerations"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"HTLCs require calculating fees correctly across multiple hops. Each intermediary node must reduce the amount they forward to account for their fee while maintaining proper routing information."})]}),(0,a.jsxs)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"HTLC Jamming Attacks"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Attackers can lock up channel liquidity by creating many small HTLCs and not revealing the preimage. Timeout values must balance payment reliability with attack vulnerability."})]})]})})]}),(0,a.jsxs)(n.Zp,{className:"p-6 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-purple-500 mr-2"}),"Advanced HTLC Implementations"]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"border border-border p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"PTLCs (Point Time-Locked Contracts)"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"The next evolution of HTLCs that uses Schnorr signatures and point-based cryptography instead of hash functions, offering improved privacy by making all hops in a route look indistinguishable on-chain."})]}),(0,a.jsxs)("div",{className:"border border-border p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Atomic Multipath Payments (AMPs)"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Extending HTLCs to split payments across multiple routes using multiple preimages that all hash to the same value, enabling larger payments to be made through channels with limited individual capacity."})]})]})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(l.A,{moduleId:x,sectionId:g,verificationId:"htlc-deep-dive-basics",label:"I understand the advanced concepts of HTLCs in the Lightning Network"})})]})})})}},29621:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},32919:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},35169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},43453:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},74681:(e,s,t)=>{Promise.resolve().then(t.bind(t,23444))},78208:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(95155),r=t(12115),i=t(93156),l=t(35695),n=t(5196);let c=e=>{let{moduleId:s,verificationId:t,sectionId:c,label:d="I understand what Bitcoin is and its revolutionary properties"}=e,{updateSectionProgress:o,getSectionProgress:m,markSectionComplete:h}=(0,i.v)(),u=(0,l.usePathname)().includes("/lightning")?"lightning":"bitcoin",p=s.includes("-")?s:"".concat(u,"-").concat(s),x=c||t,[g,f]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{f(m(u,p,x)>=100)},[p,t,x,u]),(0,a.jsx)("div",{className:"mt-4 mb-8",children:(0,a.jsxs)("button",{onClick:()=>{let e=!g;f(e),e&&(o(u,p,x,t),h(u,p,x))},className:"flex items-center focus:outline-none",children:[(0,a.jsx)("div",{className:"\n          w-5 h-5 rounded-sm flex items-center justify-center mr-3\n          ".concat(g?"bg-emerald-500":"border border-muted-foreground","\n        "),children:g&&(0,a.jsx)(n.A,{className:"h-4 w-4 text-white"})}),(0,a.jsx)("span",{className:"text-sm",children:d})]})})}},92138:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[1778,4055,9051,3156,6400,8441,1684,7358],()=>s(74681)),_N_E=e.O()}]);